<!doctype html>
<html lang="en">
<head>
  <title>P2P file sharing</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap-theme.min.css">
  <link rel="stylesheet" href="/css/app.css">
</head>

<body>
  <script type="text/x-handlebars">
    <div id="wrap">
      <nav id="header" class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">FileDrop - P2P file transfer</a>
        </div>

        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            {{#if 'user.email' }}
              <li><a href="javascript:void(0)" {{action 'signOut'}}>Sign out</a></li>
            {{else}}
              <li><a href="javascript:void(0)" {{action 'signIn'}}>Sign in</a></li>
            {{/if}}
          </ul>
        </div>
      </nav>

      {{outlet}}

      <svg class="circles" viewBox="-0.5 -0.5 1140 600">
        <circle cx="570" cy="500" r="120" stroke="rgba(160,160,160, 1)" stroke-width="0.4" stroke-dashoffset="0" fill="rgba(0,0,0,0)"/>
        <circle cx="570" cy="500" r="220" stroke="rgba(160,160,160, 9)" stroke-width="0.4" stroke-dashoffset="0" fill="rgba(0,0,0,0)"/>
        <circle cx="570" cy="500" r="320" stroke="rgba(160,160,160,.8)" stroke-width="0.4" stroke-dashoffset="0" fill="rgba(0,0,0,0)"/>
        <circle cx="570" cy="500" r="420" stroke="rgba(160,160,160,.7)" stroke-width="0.4" stroke-dashoffset="0" fill="rgba(0,0,0,0)"/>
        <circle cx="570" cy="500" r="520" stroke="rgba(160,160,160,.6)" stroke-width="0.4" stroke-dashoffset="0" fill="rgba(0,0,0,0)"/>
      </svg>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="index">
    <div class="users">
      {{#each peer in model}}
        {{render "peer" peer}}
      {{/each}}
    </div>

    {{#if user.uuid}}
      <div class="user you">
        {{ render "peer" user}}
      </div>
    {{/if}}
  </script>

  <script type="text/x-handlebars" data-template-name="peer">
    {{#confirm-popover confirm-button-label="Send" cancel-button-label="Cancel"}}
      Do you want to send "{{filename}}" to "{{recipient}}"?
    {{/confirm-popover}}

    {{#confirm-popover confirm-button-label="Save" cancel-button-label="Decline"}}
      "{{sender}}" wants to send you "{{filename}}".
    {{/confirm-popover}}

    <img class="gravatar img-circle" {{bind-attr src="avatarUrl" alt="label" title="email"}}>
    <div class="user-info">
      <p>{{label}}</p>
      {{#if isConnected}}<span class="label label-success">connected</span>{{/if}}
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="sign-in">
    <a href="#">Sign in using Persona</a>
  </script>

  <script type="text/x-handlebars" data-template-name="sign-out">
    <a href="#">Sign out</a>
  </script>

  <script type="text/x-handlebars" data-template-name="components/confirm-popover">
    <div class="media">
      <div class="pull-left" href="#">
        <img class="media-object" src="" alt="" />
      </div>
      <div class="media-body">{{yield}}</div>
    </div>

    <div class="pull-right">
      <button type="button" class="btn btn-default btn-sm" {{action "cancel"}}>{{cancel-button-label}}</button>
      <button type="button" class="btn btn-default btn-sm" {{action "confirm"}}>{{confirm-button-label}}</button>
    </div>
  </script>

  <script src="https://login.persona.org/include.js"></script>
  <script src="/js/vendor/peer.js"></script>
  <script src="/js/vendor/socket.io/socket.io.js"></script>

  <script src="/js/vendor/jquery-2.0.3.js"></script>
  <script src="/js/vendor/ba-tiny-pubsub.js"></script>

  <!-- Ember -->
  <script src="/js/vendor/handlebars-1.1.2.js"></script>
  <script src="/js/vendor/ember-1.3.1.js"></script>

  <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>

  <!-- Application -->
  <script src="/js/app.js"></script>
  <script src="/js/app/lib/room.js"></script>
  <script src="/js/app/lib/webrtc.js"></script>
  <script src="/js/app/components/confirm_popover_component.js"></script>
  <script src="/js/app/controllers/application_controller.js"></script>
  <script src="/js/app/controllers/index_controller.js"></script>
  <script src="/js/app/controllers/peer_controller.js"></script>
  <script src="/js/app/models/peer.js"></script>
  <script src="/js/app/views/index_view.js"></script>
  <script src="/js/app/views/peer_view.js"></script>
</body>
</html>
